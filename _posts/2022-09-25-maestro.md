---
layout: post
title: Maestro - automate UI testing for your mobile app
subtitle: Use Maestro to automate UI testing for Dream by WOMBO app.
cover-img: https://images.unsplash.com/photo-1518349619113-03114f06ac3a
tags: [android, ios, ui-automation, blackbox-testing]
---

In this tutorial, I use `Maestro` to automate UI testing for [Dream by WOMBO](https://play.google.com/store/apps/details?id=com.womboai.wombodream) app.


### Overview

#### Maestro

[Maestro](https://github.com/mobile-dev-inc/maestro) is open source, wrrited by `Kotlin` 

- Simple 
- Support Android & iOS
- All of application (Android), not only your application.
- Works anywhere

#### Layout Inspector

- With Android, with your application, you can use [Layout Inspector](https://developer.android.com/studio/debug/layout-inspector) on Android Studio 

  <img src="https://developer.android.com/static/studio/images/debug/li-sunflower-app.png" width = 500>

  or [uiautomatorviewer](https://www.oreilly.com/library/view/mobile-test-automation/9781787280168/20055706-ad91-4029-8a47-5513327309ba.xhtml) 

- With iOS, you can [LayoutInspector](https://github.com/isavynskyi/LayoutInspector) or [Facebook idb](https://github.com/facebook/idb)


- In this turorial, I use [android-inspector](https://github.com/ttpho/android-inspector). It is a productive UI layout inspector any Android app.


### UI test 

#### Setup

- Installed [Maestro](https://github.com/mobile-dev-inc/maestro)
- Installed [android-inspector](https://github.com/ttpho/android-inspector) 
- Installed [Dream by WOMBO](https://play.google.com/store/apps/details?id=com.womboai.wombodream) app on Goolge Play Store app on Emulator 
- Opened app on Android emulator

#### Android Inspector

- Open `Android Inspector` app

<img width=200 src="/assets/img/maestro/Android Inspector.jpg" />

- Access  `http://193.168.1.100:8080/` on Google Chrome 

- Open app  `Dream by WOMBO` 

- Inspector login screen 

![Inspector Login Screen](/assets/img/maestro/log_screen.png)

- Inspector main screen 

![Inspector Main Screen](/assets/img/maestro/main_screen.png)

You can see button `+`, without ID or Text  

- Inspector create art screen 

![Inspector Create Art Screen](/assets/img/maestro/create_screen.png)

#### Test step
- Step 1: Open app 

- Step 2: In login screen, click button `Try it out` , change to main screen

<img width=200 src="/assets/img/maestro/step_2.jpg" />

- Step 3: In main screen, click button `+` , change to create art screen

<img width=200 src="/assets/img/maestro/step_3.jpg" />

- Step 4: In create art screen, enter prompt: `Pikachu`, choosen `Paint` style and click button `Create`, change to creating screen

<img width=200 src="/assets/img/maestro/step_4.jpg" />

validate  text `View all benefits`

- Step 5: In creating screen, waiting to done, after 1 s, move result screen 

<img width=200 src="/assets/img/maestro/step_5.jpg" />

- Step 6: In result screen, take screenshot 

<img width=200 src="/assets/img/maestro/step_6.jpg" />


#### Excute

Run on terminal `maestro test flow_wombodream.yaml`


```yaml
# maestro test flow_wombodream.yaml
appId: com.womboai.wombodream
---
- launchApp
- tapOn: "Try it out"
- tapOn: # press button create new 
    width: 198       
    height: 198     
    tolerance: 10    
- tapOn: "Type anything"
- inputText: "Pikachu"
- tapOn: "Paint"
- tapOn: "Create"
- assertVisible: "View all benefits"
- extendedWaitUntil:
    visible: Generate Again
    timeout: 10000
- takeScreenshot: CreateArtScreen 

```

#### Test record 

![Test record](/assets/img/maestro/recording_test.gif)


[Video test record](https://ttpho.github.io/assets/img/maestro/recording_test.mov)


#### Test result 

I got screenshot file `CreateArtScreen.png`

<img width=200 src="/assets/img/maestro/CreateArtScreen.png" />

### Note

Supported by [DartJ](https://dartj.web.app/)

[Cover Photo](https://unsplash.com/photos/WC6MJ0kRzGw)
